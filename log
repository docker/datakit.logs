=== Docker build Dockerfile.github
[2019-03-11 10:53.50] Starting...
Cloning into '/tmp/with_clone2c666a19'...
done.
HEAD is now at bc1dd09 use non-deprecated JSON types in latest yojson
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 5.826 MB
Step 1/22 : FROM ocaml/opam2:alpine
alpine: Pulling from ocaml/opam2
Digest: sha256:22c602c753b42f7db92ad08187b89c80ae9a68991f65b2d6743fb862d20b0875
Status: Image is up to date for ocaml/opam2:alpine
 ---> b29794a38c38
Step 2/22 : RUN sudo apk add --no-cache tzdata aspcud gmp-dev perl libev-dev m4
 ---> Using cache
 ---> 09ba0013948b
Step 3/22 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Using cache
 ---> 478e83d1f5e6
Step 4/22 : RUN git -C /home/opam/opam-repository fetch origin &&     git -C /home/opam/opam-repository reset b01a2e4e1ac2fb545d593ad40bc95b4a78dec9e2 --hard &&     opam update -u
 ---> Using cache
 ---> 9e5b4761e5bf
Step 5/22 : RUN opam install alcotest lwt conf-libev inotify tls
 ---> Using cache
 ---> 58d8959e8620
Step 6/22 : COPY check-libev.ml /tmp/check-libev.ml
 ---> Using cache
 ---> 66ca48d1a577
Step 7/22 : RUN opam exec -- ocaml /tmp/check-libev.ml
 ---> Using cache
 ---> 939b82388196
Step 8/22 : COPY *.opam /home/opam/src/datakit/
 ---> aca9c9d76c2f
Removing intermediate container a0387010737b
Step 9/22 : RUN opam pin add /home/opam/src/datakit/ -n
 ---> Running in 3a9bf5b6966c
This will pin the following packages: datakit, datakit-server, datakit-server-9p, datakit-github, datakit-client, datakit-client-git, datakit-client-9p, datakit-ci, datakit-bridge-local-git, datakit-bridge-github. Continue? [Y/n] y
[datakit.0.12.2: rsync]
[datakit.0.12.2] synchronised from file:///home/opam/src/datakit
datakit is now pinned to file:///home/opam/src/datakit (version 0.12.2)
[datakit-server.0.12.2: rsync]
[datakit-server.0.12.2] synchronised from file:///home/opam/src/datakit
datakit-server is now pinned to file:///home/opam/src/datakit (version 0.12.2)
[datakit-server-9p.0.12.2: rsync]
[datakit-server-9p.0.12.2] synchronised from file:///home/opam/src/datakit
datakit-server-9p is now pinned to file:///home/opam/src/datakit (version 0.12.2)
[datakit-github.0.12.2: rsync]
[datakit-github.0.12.2] synchronised from file:///home/opam/src/datakit
datakit-github is now pinned to file:///home/opam/src/datakit (version 0.12.2)
[datakit-client.0.12.2: rsync]
[datakit-client.0.12.2] synchronised from file:///home/opam/src/datakit
datakit-client is now pinned to file:///home/opam/src/datakit (version 0.12.2)
[datakit-client-git.0.12.2: rsync]
[datakit-client-git.0.12.2] synchronised from file:///home/opam/src/datakit
datakit-client-git is now pinned to file:///home/opam/src/datakit (version 0.12.2)
[datakit-client-9p.0.12.2: rsync]
[datakit-client-9p.0.12.2] synchronised from file:///home/opam/src/datakit
datakit-client-9p is now pinned to file:///home/opam/src/datakit (version 0.12.2)
[datakit-ci.0.12.2: rsync]
[datakit-ci.0.12.2] synchronised from file:///home/opam/src/datakit
datakit-ci is now pinned to file:///home/opam/src/datakit (version 0.12.2)
[datakit-bridge-local-git.0.12.2: rsync]
[datakit-bridge-local-git.0.12.2] synchronised from file:///home/opam/src/datakit
datakit-bridge-local-git is now pinned to file:///home/opam/src/datakit (version 0.12.2)
[datakit-bridge-github.0.12.2: rsync]
[datakit-bridge-github.0.12.2] synchronised from file:///home/opam/src/datakit
datakit-bridge-github is now pinned to file:///home/opam/src/datakit (version 0.12.2)
 ---> ebc8edae1bb8
Error removing intermediate container 3a9bf5b6966c: driver "aufs" failed to remove root filesystem for 3a9bf5b6966cee7de4c991252ce1f04aa8269b24454b8e5d01f81cffec68af59: could not remove diff path for id e5c29b0ba137c62522b5d04b374b49f1179c0c8dfcb35cd970bacc613be7c6d2: error preparing atomic delete: rename /var/lib/docker/aufs/diff/e5c29b0ba137c62522b5d04b374b49f1179c0c8dfcb35cd970bacc613be7c6d2 /var/lib/docker/aufs/diff/e5c29b0ba137c62522b5d04b374b49f1179c0c8dfcb35cd970bacc613be7c6d2-removing: device or resource busy
Step 10/22 : RUN opam install datakit-bridge-github --deps -t
 ---> Running in 7865cd01ef91

<><> Synchronising pinned packages ><><><><><><><><><><><><><><><><><><><><><><>
[datakit-bridge-github.0.12.2] no changes from file:///home/opam/src/datakit

The following actions will be performed:
  - install   macaddr            3.0.0
  - install   seq                base
  - install   base64             3.1.0
  - install   camomile           1.0.1
  - install   hex                1.3.0
  - install   win-error          1.0
  - install   react              1.2.1
  - install   mirage-device      1.2.0           [required by mirage-clock]
  - install   datakit-client     0.12.2*
  - install   mtime              1.1.0
  - install   io-page            2.1.0
  - install   named-pipe         0.4.0
  - install   stringext          1.5.0
  - install   fieldslib          v0.11.0
  - install   magic-mime         1.1.1
  - install   duration           0.1.2
  - install   decompress         0.7
  - install   uutf               1.0.2
  - install   rresult            0.6.0
  - install   ocamlgraph         1.8.8
  - install   logs               0.6.2           [required by mirage-flow-lwt]
  - install   asetmap            0.8.1
  - install   ocplib-endian      1.0
  - install   easy-format        1.3.1
  - install   lwt_log            1.1.0
  - install   conf-which         1
  - install   mirage-flow        1.5.0           [required by mirage-flow-lwt]
  - install   mstruct            1.4.0
  - install   menhir             20181113
  - install   ipaddr             3.0.0
  - install   re                 1.8.0
  - install   zed                1.6
  - install   lwt_react          1.1.1
  - install   mirage-time        1.1.0
  - install   mirage-kv          1.1.1           [required by mirage-kv-lwt]
  - install   mirage-clock       2.0.0           [required by tls]
  - install   io-page-unix       2.1.0
  - install   ppx_fields_conv    v0.11.0
  - install   jsonm              1.0.1
  - install   win-eventlog       0.2
  - install   irmin-watcher      0.4.0
  - install   datakit-server     0.12.2*
  - install   asl                0.11
  - install   biniou             1.2.0
  - install   mirage-channel     3.2.0
  - install   atd                2.0.0
  - install   uri                2.2.0
  - install   prometheus         0.5
  - install   lambda-term        1.13
  - install   mirage-time-lwt    1.1.0
  - install   mirage-kv-lwt      1.1.0           [required by tls]
  - install   mirage-flow-lwt    1.5.0           [required by tls]
  - install   yojson             1.7.0
  - install   irmin              1.4.0
  - install   git                1.11.5
  - install   conduit            1.4.0
  - install   cohttp             2.0.0
  - install   mirage-channel-lwt 3.2.0
  - install   hvsock             1.0.2
  - downgrade tls                0.10.1 to 0.9.3
  - install   atdgen-runtime     2.0.0
  - install   irmin-mem          1.3.0
  - install   irmin-git          1.3.0
  - install   conduit-lwt        1.4.0
  - install   cohttp-lwt         2.0.0
  - install   protocol-9p        1.0.1
  - install   atdgen             2.0.0
  - install   conduit-lwt-unix   1.4.0
  - install   git-http           1.11.4
  - install   protocol-9p-unix   1.0.1
  - install   datakit-server-9p  0.12.2*
  - install   github             4.0.0
  - install   cohttp-lwt-unix    2.0.0
  - install   datakit-client-9p  0.12.2*
  - install   github-hooks       0.4.0
  - install   prometheus-app     0.5
  - install   github-unix        4.0.0
  - install   git-unix           1.11.5
  - install   datakit            0.12.2*
  - install   github-hooks-unix  0.4.0
  - install   datakit-client-git 0.12.2*
  - install   datakit-github     0.12.2*
===== 81 to install | 1 to downgrade =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[asetmap.0.8.1] downloaded from http://erratique.ch/software/asetmap/releases/asetmap-0.8.1.tbz
[asl.0.11] downloaded from https://github.com/mirage/ocaml-asl/releases/download/0.11/asl-0.11.tbz
[atd.2.0.0] downloaded from https://github.com/mjambon/atd/releases/download/2.0.0/atd-2.0.0.tbz
[atdgen.2.0.0] downloaded from https://github.com/mjambon/atd/releases/download/2.0.0/atd-2.0.0.tbz
[atdgen-runtime.2.0.0] downloaded from https://github.com/mjambon/atd/releases/download/2.0.0/atd-2.0.0.tbz
[base64.3.1.0] downloaded from https://github.com/mirage/ocaml-base64/releases/download/v3.1.0/base64-v3.1.0.tbz
[biniou.1.2.0] downloaded from https://github.com/mjambon/biniou/archive/v1.2.0.tar.gz
[cohttp.2.0.0] downloaded from https://github.com/mirage/ocaml-cohttp/releases/download/v2.0.0/cohttp-v2.0.0.tbz
[cohttp-lwt-unix.2.0.0] found in cache
[cohttp-lwt.2.0.0] downloaded from https://github.com/mirage/ocaml-cohttp/releases/download/v2.0.0/cohttp-v2.0.0.tbz
[camomile.1.0.1] downloaded from https://github.com/yoriyuki/Camomile/releases/download/1.0.1/camomile-1.0.1.tbz
[conduit.1.4.0] downloaded from https://github.com/mirage/ocaml-conduit/releases/download/v1.4.0/conduit-v1.4.0.tbz
[conduit-lwt-unix.1.4.0] found in cache
[conduit-lwt.1.4.0] downloaded from https://github.com/mirage/ocaml-conduit/releases/download/v1.4.0/conduit-v1.4.0.tbz
[duration.0.1.2] downloaded from https://github.com/hannesm/duration/releases/download/0.1.2/duration-0.1.2.tbz
[decompress.0.7] downloaded from https://github.com/mirage/decompress/releases/download/v0.7/decompress-0.7.tbz
[fieldslib.v0.11.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.11/files/fieldslib-v0.11.0.tar.gz
[easy-format.1.3.1] downloaded from https://github.com/mjambon/easy-format/archive/v1.3.1.tar.gz
[git.1.11.5] downloaded from https://github.com/mirage/ocaml-git/releases/download/1.11.5/git-1.11.5.tbz
[git-http.1.11.4] downloaded from https://github.com/mirage/ocaml-git/releases/download/1.11.4/git-1.11.4.tbz
[git-unix.1.11.5] downloaded from https://github.com/mirage/ocaml-git/releases/download/1.11.5/git-1.11.5.tbz
[github.4.0.0] downloaded from https://github.com/mirage/ocaml-github/releases/download/4.0.0/github-4.0.0.tbz
[github-unix.4.0.0] found in cache
[github-hooks.0.4.0] downloaded from https://github.com/dsheets/ocaml-github-hooks/releases/download/0.4.0/github-hooks-0.4.0.tbz
[github-hooks-unix.0.4.0] downloaded from https://github.com/dsheets/ocaml-github-hooks/releases/download/0.4.0/github-hooks-0.4.0.tbz
[hex.1.3.0] downloaded from https://github.com/mirage/ocaml-hex/releases/download/v1.3.0/hex-v1.3.0.tbz
[hvsock.1.0.2] downloaded from https://github.com/mirage/ocaml-hvsock/archive/1.0.2.tar.gz
[io-page.2.1.0] downloaded from https://github.com/mirage/io-page/releases/download/v2.1.0/io-page-v2.1.0.tbz
[io-page-unix.2.1.0] downloaded from https://github.com/mirage/io-page/releases/download/v2.1.0/io-page-v2.1.0.tbz
[ipaddr.3.0.0] downloaded from https://github.com/mirage/ocaml-ipaddr/releases/download/3.0.0/ipaddr-3.0.0.tbz
[irmin.1.4.0] downloaded from https://github.com/mirage/irmin/releases/download/1.4.0/irmin-1.4.0.tbz
[irmin-git.1.3.0] downloaded from https://github.com/mirage/irmin/releases/download/1.3.0/irmin-1.3.0.tbz
[jsonm.1.0.1] downloaded from http://erratique.ch/software/jsonm/releases/jsonm-1.0.1.tbz
[irmin-watcher.0.4.0] downloaded from https://github.com/mirage/irmin-watcher/releases/download/0.4.0/irmin-watcher-0.4.0.tbz
[logs.0.6.2] downloaded from http://erratique.ch/software/logs/releases/logs-0.6.2.tbz
[irmin-mem.1.3.0] downloaded from https://github.com/mirage/irmin/releases/download/1.3.0/irmin-1.3.0.tbz
[lambda-term.1.13] downloaded from https://github.com/diml/lambda-term/releases/download/1.13/lambda-term-1.13.tbz
[lwt_log.1.1.0] downloaded from https://github.com/aantron/lwt_log/archive/1.1.0.tar.gz
[macaddr.3.0.0] found in cache
[menhir.20181113] downloaded from https://gitlab.inria.fr/fpottier/menhir/repository/20181113/archive.tar.gz
[lwt_react.1.1.1] downloaded from https://github.com/ocsigen/lwt/archive/4.0.0.tar.gz
[magic-mime.1.1.1] downloaded from https://github.com/mirage/ocaml-magic-mime/releases/download/v1.1.1/magic-mime-v1.1.1.tbz
[mirage-channel.3.2.0] downloaded from https://github.com/mirage/mirage-channel/releases/download/v3.2.0/mirage-channel-v3.2.0.tbz
[mirage-channel-lwt.3.2.0] downloaded from https://github.com/mirage/mirage-channel/releases/download/v3.2.0/mirage-channel-v3.2.0.tbz
[mirage-clock.2.0.0] downloaded from https://github.com/mirage/mirage-clock/releases/download/v2.0.0/mirage-clock-v2.0.0.tbz
[mirage-device.1.2.0] downloaded from https://github.com/mirage/mirage-device/releases/download/v1.2.0/mirage-device-v1.2.0.tbz
[mirage-flow.1.5.0] downloaded from https://github.com/mirage/mirage-flow/releases/download/v1.5.0/mirage-flow-1.5.0.tbz
[mirage-flow-lwt.1.5.0] downloaded from https://github.com/mirage/mirage-flow/releases/download/v1.5.0/mirage-flow-1.5.0.tbz
[mirage-kv.1.1.1] downloaded from https://github.com/mirage/mirage-kv/releases/download/v1.1.1/mirage-kv-1.1.1.tbz
[mirage-kv-lwt.1.1.0] downloaded from https://github.com/mirage/mirage-kv/releases/download/v1.1.0/mirage-kv-1.1.0.tbz
[mirage-time.1.1.0] downloaded from https://github.com/mirage/mirage-time/releases/download/v1.1.0/mirage-time-1.1.0.tbz
[mtime.1.1.0] downloaded from http://erratique.ch/software/mtime/releases/mtime-1.1.0.tbz
[mirage-time-lwt.1.1.0] downloaded from https://github.com/mirage/mirage-time/releases/download/v1.1.0/mirage-time-1.1.0.tbz
[mstruct.1.4.0] downloaded from https://github.com/mirage/ocaml-mstruct/releases/download/v1.4.0/mstruct-1.4.0.tbz
[ocamlgraph.1.8.8] downloaded from http://ocamlgraph.lri.fr/download/ocamlgraph-1.8.8.tar.gz
[named-pipe.0.4.0] downloaded from https://github.com/mirage/ocaml-named-pipe/releases/download/0.4.0/named-pipe-0.4.0.tbz
[ppx_fields_conv.v0.11.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.11/files/ppx_fields_conv-v0.11.0.tar.gz
[ocplib-endian.1.0] downloaded from https://github.com/OCamlPro/ocplib-endian/archive/1.0.tar.gz
[prometheus.0.5] downloaded from https://github.com/mirage/prometheus/releases/download/v0.5/prometheus-0.5.tbz
[prometheus-app.0.5] downloaded from https://github.com/mirage/prometheus/releases/download/v0.5/prometheus-0.5.tbz
[protocol-9p.1.0.1] downloaded from https://github.com/mirage/ocaml-9p/releases/download/v1.0.1/protocol-9p-v1.0.1.tbz
[react.1.2.1] downloaded from http://erratique.ch/software/react/releases/react-1.2.1.tbz
[rresult.0.6.0] downloaded from http://erratique.ch/software/rresult/releases/rresult-0.6.0.tbz
[protocol-9p-unix.1.0.1] downloaded from https://github.com/mirage/ocaml-9p/releases/download/v1.0.1/protocol-9p-v1.0.1.tbz
[re.1.8.0] downloaded from https://github.com/ocaml/ocaml-re/releases/download/1.8.0/re-1.8.0.tbz
[stringext.1.5.0] downloaded from https://github.com/rgrinberg/stringext/archive/1.5.0.zip
[uutf.1.0.2] downloaded from http://erratique.ch/software/uutf/releases/uutf-1.0.2.tbz
[tls.0.9.3] downloaded from https://github.com/mirleft/ocaml-tls/releases/download/0.9.3/tls-0.9.3.tbz
[uri.2.2.0] downloaded from https://github.com/mirage/ocaml-uri/releases/download/v2.2.0/uri-v2.2.0.tbz
[win-error.1.0] downloaded from https://github.com/mirage/ocaml-win-error/releases/download/1.0/win-error-1.0.tbz
[win-eventlog.0.2] downloaded from https://github.com/djs55/ocaml-win-eventlog/archive/v0.2.tar.gz
[yojson.1.7.0] downloaded from https://github.com/ocaml-community/yojson/releases/download/1.7.0/yojson-1.7.0.tbz
[zed.1.6] downloaded from https://github.com/diml/zed/releases/download/1.6/zed-1.6.tbz

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed seq.base
-> installed asetmap.0.8.1
-> installed conf-which.1
-> installed datakit-client.0.12.2
-> installed duration.0.1.2
-> installed decompress.0.7
-> installed easy-format.1.3.1
-> installed fieldslib.v0.11.0
-> installed hex.1.3.0
-> installed io-page.2.1.0
-> installed logs.0.6.2
-> installed lwt_log.1.1.0
-> installed macaddr.3.0.0
-> installed magic-mime.1.1.1
-> installed mirage-device.1.2.0
-> removed   tls.0.10.1
-> installed mirage-flow.1.5.0
-> installed mstruct.1.4.0
-> installed mtime.1.1.0
-> installed named-pipe.0.4.0
-> installed react.1.2.1
-> installed rresult.0.6.0
-> installed stringext.1.5.0
-> installed uutf.1.0.2
-> installed win-error.1.0
-> installed re.1.8.0
-> installed base64.3.1.0
-> installed camomile.1.0.1
-> installed menhir.20181113
-> installed asl.0.11
-> installed biniou.1.2.0
-> installed datakit-server.0.12.2
-> installed io-page-unix.2.1.0
-> installed ipaddr.3.0.0
-> installed irmin-watcher.0.4.0
-> installed jsonm.1.0.1
-> installed lwt_react.1.1.1
-> installed mirage-channel.3.2.0
-> installed mirage-clock.2.0.0
-> installed mirage-kv.1.1.1
-> installed mirage-time.1.1.0
-> installed ocplib-endian.1.0
-> installed atd.2.0.0
-> installed mirage-flow-lwt.1.5.0
-> installed mirage-kv-lwt.1.1.0
-> installed mirage-time-lwt.1.1.0
-> installed ocamlgraph.1.8.8
-> installed mirage-channel-lwt.3.2.0
-> installed ppx_fields_conv.v0.11.0
-> installed prometheus.0.5
-> installed uri.2.2.0
-> installed win-eventlog.0.2
-> installed yojson.1.7.0
-> installed zed.1.6
-> installed tls.0.9.3
-> installed hvsock.1.0.2
-> installed protocol-9p.1.0.1
-> installed cohttp.2.0.0
-> installed conduit.1.4.0
-> installed git.1.11.5
-> installed irmin.1.4.0
-> installed atdgen-runtime.2.0.0
-> installed lambda-term.1.13
-> installed datakit-server-9p.0.12.2
-> installed protocol-9p-unix.1.0.1
-> installed cohttp-lwt.2.0.0
-> installed conduit-lwt.1.4.0
-> installed irmin-git.1.3.0
-> installed irmin-mem.1.3.0
-> installed atdgen.2.0.0
-> installed datakit-client-9p.0.12.2
-> installed git-http.1.11.4
-> installed conduit-lwt-unix.1.4.0
-> installed cohttp-lwt-unix.2.0.0
-> installed prometheus-app.0.5
-> installed datakit.0.12.2
-> installed git-unix.1.11.5
-> installed datakit-client-git.0.12.2
-> installed datakit-github.0.12.2
-> installed github.4.0.0
-> installed github-hooks.0.4.0
-> installed github-unix.4.0.0
-> installed github-hooks-unix.0.4.0
Done.
# Run eval $(opam env) to update the current shell environment
 ---> f4786a95074b
Removing intermediate container 3a9bf5b6966c
Removing intermediate container 7865cd01ef91
Step 11/22 : COPY . /home/opam/src/datakit
 ---> c7621ca3f907
Removing intermediate container 6550ba889790
Step 12/22 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 260d40416852
 ---> cc324c6db4b8
Removing intermediate container 260d40416852
Step 13/22 : RUN opam update --dev && opam upgrade
 ---> Running in 8f4ed1de1162

<><> Synchronising development packages <><><><><><><><><><><><><><><><><><><><>
[datakit.0.12.2] synchronised from file:///home/opam/src/datakit
[datakit-bridge-github.0.12.2] synchronised from file:///home/opam/src/datakit
[datakit-bridge-local-git.0.12.2] synchronised from file:///home/opam/src/datakit
[datakit-ci.0.12.2] synchronised from file:///home/opam/src/datakit
[datakit-client.0.12.2] synchronised from file:///home/opam/src/datakit
[datakit-client-9p.0.12.2] synchronised from file:///home/opam/src/datakit
[datakit-client-git.0.12.2] synchronised from file:///home/opam/src/datakit
[datakit-github.0.12.2] synchronised from file:///home/opam/src/datakit
[datakit-server.0.12.2] synchronised from file:///home/opam/src/datakit
[datakit-server-9p.0.12.2] synchronised from file:///home/opam/src/datakit
Now run 'opam upgrade' to apply any package updates.
The following actions will be performed:
  - recompile datakit-client     0.12.2* [upstream changes]
  - recompile datakit-server     0.12.2* [upstream changes]
  - recompile datakit-client-git 0.12.2* [upstream changes]
  - recompile datakit-client-9p  0.12.2* [upstream changes]
  - recompile datakit-server-9p  0.12.2* [upstream changes]
  - recompile datakit-github     0.12.2* [upstream changes]
  - recompile datakit            0.12.2* [upstream changes]
===== 7 to recompile =====

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> removed   datakit-github.0.12.2
-> removed   datakit-client-9p.0.12.2
-> removed   datakit-client-git.0.12.2
-> removed   datakit-client.0.12.2
-> installed datakit-client.0.12.2
-> removed   datakit.0.12.2
-> removed   datakit-server-9p.0.12.2
-> removed   datakit-server.0.12.2
-> installed datakit-server.0.12.2
-> installed datakit-client-9p.0.12.2
-> installed datakit-client-git.0.12.2
-> installed datakit-server-9p.0.12.2
-> installed datakit-github.0.12.2
-> installed datakit.0.12.2
Done.
# Run eval $(opam env) to update the current shell environment
 ---> 0d08a22be3b8
Removing intermediate container 8f4ed1de1162
Step 14/22 : RUN opam install datakit-bridge-github -ytv
 ---> Running in ac9863812f6a

<><> Synchronising pinned packages ><><><><><><><><><><><><><><><><><><><><><><>
Processing  1/1: [datakit-bridge-github.0.12.2: rsync]
[datakit-bridge-github.0.12.2] no changes from file:///home/opam/src/datakit

The following actions will be performed:
  - install datakit-bridge-github 0.12.2*

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  1/2: [datakit-bridge-github: dune build]
+ /home/opam/.opam/4.07/bin/dune "build" "-p" "datakit-bridge-github" "-j" "71" (CWD=/home/opam/.opam/4.07/.opam-switch/build/datakit-bridge-github.0.12.2)
Processing  1/2: [datakit-bridge-github: dune runtest]
+ /home/opam/.opam/4.07/bin/dune "runtest" "tests/datakit-bridge-github" (CWD=/home/opam/.opam/4.07/.opam-switch/build/datakit-bridge-github.0.12.2)
-         test alias tests/datakit-bridge-github/runtest
- /bin/sh: tput: not found
- stty: 'standard input': Not a tty
- Testing datakit-github.
- This run has ID `6A209E83-4F6B-48E4-9D47-721DDBF6844C`.
- [33m ...[m                [36mgithub-9p[m          0   Transaction.[32m[OK][m                [36mgithub-9p[m          0   Transaction.
- [33m ...[m                [36mgithub-9p[m          1   Watch.[32m[OK][m                [36mgithub-9p[m          1   Watch.
- [33m ...[m                [36mgithub-9p[m          2   Make dirs.[32m[OK][m                [36mgithub-9p[m          2   Make dirs.
- [33m ...[m                [36mgithub-9p[m          3   Truncate.[32m[OK][m                [36mgithub-9p[m          3   Truncate.
- [33m ...[m                [36mgithub-9p[m          4   Parents.[32m[OK][m                [36mgithub-9p[m          4   Parents.
- [33m ...[m                [36mgithub-9p[m          5   Merge.[32m[OK][m                [36mgithub-9p[m          5   Merge.
- [33m ...[m                [36mgithub-9p[m          6   Diff.[32m[OK][m                [36mgithub-9p[m          6   Diff.
- [33m ...[m                [36mgithub-9p[m          7   Merge_metadata.[32m[OK][m                [36mgithub-9p[m          7   Merge_metadata.
- [33m ...[m                [36mgithub-9p[m          8   Merge empty.[32m[OK][m                [36mgithub-9p[m          8   Merge empty.
- [33m ...[m                [36mgithub-9p[m          9   Conflicts.[32m[OK][m                [36mgithub-9p[m          9   Conflicts.
- [33m ...[m                [36mgithub-9p[m         10   Large write.[32m[OK][m                [36mgithub-9p[m         10   Large write.
- [33m ...[m                [36mgithub-9p[m         11   Remove.[32m[OK][m                [36mgithub-9p[m         11   Remove.
- [33m ...[m                [36mgithub-9p[m         12   Remotes.[33m[SKIP][m              [36mgithub-9p[m         12   Remotes.
- [33m ...[m                [36mgithub-9p[m         13   Create_or_replace.[33m[SKIP][m              [36mgithub-9p[m         13   Create_or_replace.
- [33m ...[m                [36mgithub[m             0   basic-snapshot.[32m[OK][m                [36mgithub[m             0   basic-snapshot.
- [33m ...[m                [36mgithub[m             1   snapshot.[32m[OK][m                [36mgithub[m             1   snapshot.
- [33m ...[m                [36mgithub[m             2   capabilities.[32m[OK][m                [36mgithub[m             2   capabilities.
- [33m ...[m                [36mgithub[m             3   cleanup.[32m[OK][m                [36mgithub[m             3   cleanup.
- [33m ...[m                [36mgithub[m             4   events.[32m[OK][m                [36mgithub[m             4   events.
- [33m ...[m                [36mgithub[m             5   updates.[32m[OK][m                [36mgithub[m             5   updates.
- [33m ...[m                [36mgithub[m             6   startup.[32m[OK][m                [36mgithub[m             6   startup.
- [33m ...[m                [36mgithub[m             7   random-github.[32m[OK][m                [36mgithub[m             7   random-github.
- [33m ...[m                [36mgithub[m             8   random-github-*.[33m[SKIP][m              [36mgithub[m             8   random-github-*.
- [33m ...[m                [36mgithub[m             9   random-datakit.[32m[OK][m                [36mgithub[m             9   random-datakit.
- [33m ...[m                [36mgithub[m            10   random-datakit-*.[33m[SKIP][m              [36mgithub[m            10   random-datakit-*.
- The full test results are available in `/home/opam/.opam/4.07/.opam-switch/build/datakit-bridge-github.0.12.2/_build/default/tests/datakit-bridge-github/_build/_tests/6A209E83-4F6B-48E4-9D47-721DDBF6844C`.
- [32mTest Successful[m in 4.428s. 21 tests run.
-> compiled  datakit-bridge-github.0.12.2
-> installed datakit-bridge-github.0.12.2
Done.
# Run eval $(opam env) to update the current shell environment
 ---> 7c12bfffba9f
Removing intermediate container ac9863812f6a
Step 15/22 : RUN sudo cp $(opam config exec -- which datakit-bridge-github) /usr/bin/
 ---> Running in f22c3adae793
 ---> acf1a9e75ef5
Removing intermediate container f22c3adae793
Step 16/22 : FROM alpine:3.9
3.9: Pulling from library/alpine
Digest: sha256:644fcb1a676b5165371437feaa922943aaf7afcfa8bfee4472f6860aad1ef2a0
Status: Image is up to date for alpine:3.9
 ---> 5cb3aa00f899
Step 17/22 : RUN apk add --no-cache libev gmp tzdata ca-certificates
 ---> Using cache
 ---> 822cd4224bb3
Step 18/22 : EXPOSE 5640
 ---> Using cache
 ---> e39249ad73bc
Step 19/22 : EXPOSE 5641
 ---> Using cache
 ---> c4a7c6af6115
Step 20/22 : ENTRYPOINT /usr/bin/datakit-bridge-github
 ---> Using cache
 ---> d024131549f3
Step 21/22 : CMD --listen=tcp://0.0.0.0:5641 -v --datakit=tcp:127.0.0.1:5640
 ---> Using cache
 ---> 91d8bc1e3469
Step 22/22 : COPY --from=0 /usr/bin/datakit-bridge-github /usr/bin/datakit-bridge-github
 ---> 19ab31a41b21
Removing intermediate container b4134a8ea16d
Successfully built 19ab31a41b21
[2019-03-11 10:57.38] Success
