=== Docker build Dockerfile
[2019-07-12 14:22.49] Starting...
Cloning into '/tmp/with_clone37058f85'...
done.
HEAD is now at 9c925f0 ci: pin to 4.07 compiler
Sending build context to Docker daemon 557.1 kBSending build context to Docker daemon 1.114 MBSending build context to Docker daemon 1.671 MBSending build context to Docker daemon 2.228 MBSending build context to Docker daemon 2.785 MBSending build context to Docker daemon 3.342 MBSending build context to Docker daemon 3.899 MBSending build context to Docker daemon 4.456 MBSending build context to Docker daemon 5.014 MBSending build context to Docker daemon 5.571 MBSending build context to Docker daemon 6.128 MBSending build context to Docker daemon 6.395 MB
Step 1/23 : FROM ocaml/opam2:alpine
alpine: Pulling from ocaml/opam2
Digest: sha256:80f944d8924204d38d8c588a6906010ddfd6364c226a26077b99a95028270790
Status: Image is up to date for ocaml/opam2:alpine
 ---> bfd59b6fbeb7
Step 2/23 : RUN sudo apk add --no-cache tzdata aspcud gmp-dev perl libev-dev m4
 ---> Using cache
 ---> 3cfa4c307c86
Step 3/23 : RUN opam switch 4.07
 ---> Running in 3ef336d1dab6
# Run eval $(opam env) to update the current shell environment
 ---> eb94b78db497
Removing intermediate container 3ef336d1dab6
Step 4/23 : ENV OPAMERRLOGLEN 0 OPAMYES 1
 ---> Running in 7d902c13c06b
 ---> 0b2dbde2954d
Removing intermediate container 7d902c13c06b
Step 5/23 : RUN git -C /home/opam/opam-repository fetch origin &&     git -C /home/opam/opam-repository reset 340acb7d88264bf29485b1d292388e1d91dc2214 --hard &&     opam update -u
 ---> Running in 49771f834b2a
[91mFrom git://github.com/ocaml/opam-repository
   2a22479e66..340acb7d88  master     -> origin/master
[0m[91mChecking out files:  44% (5941/13330)[0m[91mChecking out files:  45% (5999/13330)[0m[91mChecking out files:  46% (6132/13330)[0m[91mChecking out files:  47% (6266/13330)[0m[91mChecking out files:  48% (6399/13330)[0m[91mChecking out files:  49% (6532/13330)[0m[91mChecking out files:  50% (6665/13330)[0m[91mChecking out files:  51% (6799/13330)[0m[91mChecking out files:  52% (6932/13330)[0m[91mChecking out files:  53% (7065/13330)[0m[91mChecking out files:  54% (7199/13330)[0m[91mChecking out files:  55% (7332/13330)[0m[91mChecking out files:  56% (7465/13330)[0m[91mChecking out files:  57% (7599/13330)[0m[91mChecking out files:  58% (7732/13330)[0m[91mChecking out files:  59% (7865/13330)[0m[91mChecking out files:  60% (7998/13330)[0m[91mChecking out files:  61% (8132/13330)[0m[91mChecking out files:  62% (8265/13330)[0m[91mChecking out files:  63% (8398/13330)[0m[91mChecking out files:  64% (8532/13330)[0m[91mChecking out files:  65% (8665/13330)[0m[91mChecking out files:  66% (8798/13330)[0m[91mChecking out files:  67% (8932/13330)[0m[91mChecking out files:  68% (9065/13330)[0m[91mChecking out files:  69% (9198/13330)[0m[91mChecking out files:  70% (9331/13330)[0m[91mChecking out files:  71% (9465/13330)[0m[91mChecking out files:  72% (9598/13330)[0m[91mChecking out files:  73% (9731/13330)[0m[91mChecking out files:  74% (9865/13330)[0m[91mChecking out files:  75% (9998/13330)[0m[91mChecking out files:  75% (10070/13330)[0m[91mChecking out files:  76% (10131/13330)[0m[91mChecking out files:  77% (10265/13330)[0m[91mChecking out files:  78% (10398/13330)[0m[91mChecking out files:  79% (10531/13330)[0m[91mChecking out files:  80% (10664/13330)[0m[91mChecking out files:  81% (10798/13330)[0m[91mChecking out files:  82% (10931/13330)[0m[91mChecking out files:  83% (11064/13330)[0m[91mChecking out files:  84% (11198/13330)[0m[91mChecking out files:  85% (11331/13330)[0m[91mChecking out files:  86% (11464/13330)[0m[91mChecking out files:  87% (11598/13330)[0m[91mChecking out files:  88% (11731/13330)[0m[91mChecking out files:  89% (11864/13330)[0m[91mChecking out files:  90% (11997/13330)[0m[91mChecking out files:  91% (12131/13330)[0m[91mChecking out files:  92% (12264/13330)[0m[91mChecking out files:  93% (12397/13330)[0m[91mChecking out files:  94% (12531/13330)[0m[91mChecking out files:  95% (12664/13330)[0m[91mChecking out files:  96% (12797/13330)[0m[91mChecking out files:  97% (12931/13330)[0m[91mChecking out files:  98% (13064/13330)[0m[91mChecking out files:  99% (13197/13330)[0m[91mChecking out files: 100% (13330/13330)Checking out files: 100% (13330/13330), done.
[0mHEAD is now at 340acb7d88 Merge pull request #14485 from avsm/release-cohttp-2.1.3

<><> Updating package repositories ><><><><><><><><><><><><><><><><><><><><><><>
[default] synchronised from git+file:///home/opam/opam-repository

Everything as up-to-date as possible (run with --verbose to show unavailable upgrades).
However, you may "opam upgrade" these packages explicitly, which will ask permission to downgrade or uninstall the conflicting packages.
Nothing to do.
# Run eval $(opam env) to update the current shell environment
 ---> 61956df4ee3c
Removing intermediate container 49771f834b2a
Step 6/23 : RUN opam install alcotest lwt conf-libev inotify
 ---> Running in 004ba35f7199
The following actions will be performed:
  - install cmdliner     1.0.4  [required by alcotest]
  - install conf-m4      1      [required by ocamlfind]
  - install conf-libev   4-11
  - install seq          base   [required by lwt]
  - install dune         1.10.0 [required by alcotest, lwt]
  - install ocamlbuild   0.14.0 [required by inotify]
  - install ocamlfind    1.8.0  [required by inotify]
  - install stdlib-shims 0.1.0  [required by fmt]
  - install result       1.4    [required by alcotest, lwt]
  - install mmap         1.1.0  [required by lwt]
  - install cppo         1.6.6  [required by lwt]
  - install base-bytes   base   [required by inotify]
  - install topkg        1.0.0  [required by fmt, astring, uuidm]
  - install lwt          4.2.1
  - install uuidm        0.9.7  [required by alcotest]
  - install fmt          0.8.6  [required by alcotest]
  - install astring      0.8.3  [required by alcotest]
  - install inotify      2.3
  - install alcotest     0.8.5
===== 19 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[astring.0.8.3] downloaded from http://erratique.ch/software/astring/releases/astring-0.8.3.tbz
[cmdliner.1.0.4] downloaded from http://erratique.ch/software/cmdliner/releases/cmdliner-1.0.4.tbz
[cppo.1.6.6] downloaded from https://github.com/ocaml-community/cppo/releases/download/v1.6.6/cppo-v1.6.6.tbz
[fmt.0.8.6] downloaded from https://erratique.ch/software/fmt/releases/fmt-0.8.6.tbz
[alcotest.0.8.5] downloaded from https://github.com/mirage/alcotest/releases/download/0.8.5/alcotest-0.8.5.tbz
[dune.1.10.0] downloaded from https://github.com/ocaml/dune/releases/download/1.10.0/dune-1.10.0.tbz
[inotify.2.3] downloaded from https://github.com/whitequark/ocaml-inotify/archive/v2.3.tar.gz
[lwt.4.2.1] downloaded from https://github.com/ocsigen/lwt/archive/4.2.1.tar.gz
[ocamlfind.1.8.0] downloaded from http://download.camlcity.org/download/findlib-1.8.0.tar.gz
[mmap.1.1.0] downloaded from https://github.com/mirage/mmap/releases/download/v1.1.0/mmap-v1.1.0.tbz
[ocamlbuild.0.14.0] downloaded from https://github.com/ocaml/ocamlbuild/archive/0.14.0.tar.gz
[topkg.1.0.0] downloaded from http://erratique.ch/software/topkg/releases/topkg-1.0.0.tbz
[result.1.4] downloaded from https://github.com/janestreet/result/archive/1.4.tar.gz
[uuidm.0.9.7] downloaded from https://erratique.ch/software/uuidm/releases/uuidm-0.9.7.tbz
[stdlib-shims.0.1.0] downloaded from https://github.com/ocaml/stdlib-shims/releases/download/0.1.0/stdlib-shims-0.1.0.tbz

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed seq.base
-> installed conf-libev.4-11
-> installed conf-m4.1
-> installed cmdliner.1.0.4
-> installed ocamlfind.1.8.0
-> installed base-bytes.base
-> installed ocamlbuild.0.14.0
-> installed dune.1.10.0
-> installed stdlib-shims.0.1.0
-> installed mmap.1.1.0
-> installed result.1.4
-> installed cppo.1.6.6
-> installed topkg.1.0.0
-> installed lwt.4.2.1
-> installed astring.0.8.3
-> installed fmt.0.8.6
-> installed uuidm.0.9.7
-> installed alcotest.0.8.5
-> installed inotify.2.3
Done.
# Run eval $(opam env) to update the current shell environment
 ---> d4a4112f49af
Removing intermediate container 004ba35f7199
Step 7/23 : COPY check-libev.ml /tmp/check-libev.ml
 ---> 18307ad156bd
Removing intermediate container e1519b924e32
Step 8/23 : RUN opam exec -- ocaml /tmp/check-libev.ml
 ---> Running in a61894292318
 ---> ac914b9c6e1a
Removing intermediate container a61894292318
Step 9/23 : COPY *.opam /home/opam/src/datakit/
 ---> 3395cc8af74a
Error removing intermediate container 55a6f7e2dd56: driver "aufs" failed to remove root filesystem for 55a6f7e2dd56596ffbe73c9ca774fb1cb8693883c488151dee1f93637df77d04: could not remove diff path for id 84790edadcd3153188cd26a574df42cce047301b617cb4fb566f829885628108: error preparing atomic delete: rename /var/lib/docker/aufs/diff/84790edadcd3153188cd26a574df42cce047301b617cb4fb566f829885628108 /var/lib/docker/aufs/diff/84790edadcd3153188cd26a574df42cce047301b617cb4fb566f829885628108-removing: device or resource busy
Step 10/23 : RUN opam pin add /home/opam/src/datakit/ -n
 ---> Running in 9c7b9f97c24d
This will pin the following packages: datakit, datakit-server, datakit-server-9p, datakit-github, datakit-client, datakit-client-git, datakit-client-9p, datakit-ci, datakit-bridge-local-git, datakit-bridge-github. Continue? [Y/n] y
[datakit.0.12.3: rsync]
[datakit.0.12.3] synchronised from file:///home/opam/src/datakit
datakit is now pinned to file:///home/opam/src/datakit (version 0.12.3)
[datakit-server.0.12.3: rsync]
[datakit-server.0.12.3] synchronised from file:///home/opam/src/datakit
datakit-server is now pinned to file:///home/opam/src/datakit (version 0.12.3)
[datakit-server-9p.0.12.3: rsync]
[datakit-server-9p.0.12.3] synchronised from file:///home/opam/src/datakit
datakit-server-9p is now pinned to file:///home/opam/src/datakit (version 0.12.3)
[datakit-github.0.12.3: rsync]
[datakit-github.0.12.3] synchronised from file:///home/opam/src/datakit
datakit-github is now pinned to file:///home/opam/src/datakit (version 0.12.3)
[datakit-client.0.12.3: rsync]
[datakit-client.0.12.3] synchronised from file:///home/opam/src/datakit
datakit-client is now pinned to file:///home/opam/src/datakit (version 0.12.3)
[datakit-client-git.0.12.3: rsync]
[datakit-client-git.0.12.3] synchronised from file:///home/opam/src/datakit
datakit-client-git is now pinned to file:///home/opam/src/datakit (version 0.12.3)
[datakit-client-9p.0.12.3: rsync]
[datakit-client-9p.0.12.3] synchronised from file:///home/opam/src/datakit
datakit-client-9p is now pinned to file:///home/opam/src/datakit (version 0.12.3)
[datakit-ci.0.12.4: rsync]
[datakit-ci.0.12.4] synchronised from file:///home/opam/src/datakit
datakit-ci is now pinned to file:///home/opam/src/datakit (version 0.12.4)
[datakit-bridge-local-git.0.12.3: rsync]
[datakit-bridge-local-git.0.12.3] synchronised from file:///home/opam/src/datakit
datakit-bridge-local-git is now pinned to file:///home/opam/src/datakit (version 0.12.3)
[datakit-bridge-github.0.12.3: rsync]
[datakit-bridge-github.0.12.3] synchronised from file:///home/opam/src/datakit
datakit-bridge-github is now pinned to file:///home/opam/src/datakit (version 0.12.3)
 ---> 66b6660259d6
Removing intermediate container 55a6f7e2dd56
Removing intermediate container 9c7b9f97c24d
Step 11/23 : RUN opam install datakit --deps -t
 ---> Running in 4d6c9b6009d9

<><> Synchronising pinned packages ><><><><><><><><><><><><><><><><><><><><><><>
[datakit.0.12.3] no changes from file:///home/opam/src/datakit

The following actions will be performed:
  - install jbuilder                transition
  - install mirage-flow             1.6.0
  - install uchar                   0.0.2
  - install win-error               1.0
  - install mirage-device           1.2.0
  - install sexplib0                v0.12.0
  - install stringext               1.6.0
  - install base64                  3.2.0
  - install num                     1.2
  - install mtime                   1.1.0
  - install ocaml-compiler-libs     v0.12.0
  - install ocb-stubblr             0.1.1-1
  - install ppx_derivers            1.2.1
  - install magic-mime              1.1.1
  - install decompress              0.7
  - install rresult                 0.6.0
  - install re                      1.9.0
  - install ocamlgraph              1.8.8
  - install asetmap                 0.8.1
  - install ocplib-endian           1.0
  - install duration                0.1.2
  - install bigarray-compat         1.0.0
  - install logs                    0.6.3
  - install mirage-channel          3.2.0
  - install uutf                    1.0.2
  - install mirage-time             1.3.0
  - install mirage-clock            2.0.0
  - install macaddr                 3.1.0
  - install base                    v0.12.2
  - install named-pipe              0.4.0
  - install ocaml-migrate-parsetree 1.4.0
  - install uri                     3.0.0
  - install prometheus              0.5
  - install cstruct                 5.0.0
  - install win-eventlog            0.2
  - install irmin-watcher           0.4.1
  - install asl                     0.11
  - install jsonm                   1.0.1
  - install mirage-time-lwt         1.3.0
  - install ipaddr                  3.1.0
  - install stdio                   v0.12.0
  - install parsexp                 v0.12.0
  - install fieldslib               v0.12.0
  - install mstruct                 1.4.0
  - install mirage-flow-lwt         1.6.0
  - install io-page                 2.3.0
  - install hex                     1.4.0
  - install datakit-server          0.12.3*
  - install datakit-client          0.12.3*
  - install cstruct-lwt             5.0.0
  - install ppxlib                  0.8.0
  - install sexplib                 v0.12.0
  - install hvsock                  1.0.2
  - install mirage-channel-lwt      3.2.0
  - install io-page-unix            2.3.0
  - install irmin                   1.4.0
  - install git                     1.11.5
  - install ppx_sexp_conv           v0.12.0
  - install ppx_fields_conv         v0.12.0
  - install cstruct-sexp            5.0.0
  - install irmin-mem               1.3.0
  - install irmin-git               1.3.0
  - install uri-sexp                3.0.0
  - install conduit                 1.4.0
  - install protocol-9p             2.0.1
  - install cohttp                  2.1.3
  - install conduit-lwt             1.4.0
  - install protocol-9p-unix        2.0.1
  - install datakit-server-9p       0.12.3*
  - install cohttp-lwt              2.1.3
  - install conduit-lwt-unix        1.4.0
  - install datakit-client-9p       0.12.3*
  - install cohttp-lwt-unix         2.1.3
  - install prometheus-app          0.5
===== 74 to install =====

<><> Gathering sources ><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
[asetmap.0.8.1] downloaded from http://erratique.ch/software/asetmap/releases/asetmap-0.8.1.tbz
[asl.0.11] downloaded from https://github.com/mirage/ocaml-asl/releases/download/0.11/asl-0.11.tbz
[base64.3.2.0] downloaded from https://github.com/mirage/ocaml-base64/releases/download/v3.2.0/base64-v3.2.0.tbz
[base.v0.12.2] downloaded from https://github.com/janestreet/base/archive/v0.12.2.tar.gz
[bigarray-compat.1.0.0] downloaded from https://github.com/mirage/bigarray-compat/archive/v1.0.0.tar.gz
[cohttp-lwt.2.1.3] downloaded from https://github.com/mirage/ocaml-cohttp/releases/download/v2.1.3/cohttp-v2.1.3.tbz
[cohttp.2.1.3] downloaded from https://github.com/mirage/ocaml-cohttp/releases/download/v2.1.3/cohttp-v2.1.3.tbz
[cohttp-lwt-unix.2.1.3] downloaded from https://github.com/mirage/ocaml-cohttp/releases/download/v2.1.3/cohttp-v2.1.3.tbz
[conduit.1.4.0] downloaded from https://github.com/mirage/ocaml-conduit/releases/download/v1.4.0/conduit-v1.4.0.tbz
[conduit-lwt.1.4.0] downloaded from https://github.com/mirage/ocaml-conduit/releases/download/v1.4.0/conduit-v1.4.0.tbz
[conduit-lwt-unix.1.4.0] downloaded from https://github.com/mirage/ocaml-conduit/releases/download/v1.4.0/conduit-v1.4.0.tbz
[cstruct.5.0.0] downloaded from https://github.com/mirage/ocaml-cstruct/releases/download/v5.0.0/cstruct-v5.0.0.tbz
[cstruct-lwt.5.0.0] downloaded from https://github.com/mirage/ocaml-cstruct/releases/download/v5.0.0/cstruct-v5.0.0.tbz
[datakit-client.0.12.3] synchronised from file:///home/opam/src/datakit
[datakit-client-9p.0.12.3] synchronised from file:///home/opam/src/datakit
[datakit-server.0.12.3] synchronised from file:///home/opam/src/datakit
[datakit-server-9p.0.12.3] synchronised from file:///home/opam/src/datakit
[cstruct-sexp.5.0.0] downloaded from https://github.com/mirage/ocaml-cstruct/releases/download/v5.0.0/cstruct-v5.0.0.tbz
[duration.0.1.2] downloaded from https://github.com/hannesm/duration/releases/download/0.1.2/duration-0.1.2.tbz
[decompress.0.7] downloaded from https://github.com/mirage/decompress/releases/download/v0.7/decompress-0.7.tbz
[fieldslib.v0.12.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.12/files/fieldslib-v0.12.0.tar.gz
[hex.1.4.0] downloaded from https://github.com/mirage/ocaml-hex/releases/download/v1.4.0/hex-v1.4.0.tbz
[git.1.11.5] downloaded from https://github.com/mirage/ocaml-git/releases/download/1.11.5/git-1.11.5.tbz
[hvsock.1.0.2] downloaded from https://github.com/mirage/ocaml-hvsock/archive/1.0.2.tar.gz
[io-page-unix.2.3.0] downloaded from https://github.com/mirage/io-page/releases/download/v2.3.0/io-page-v2.3.0.tbz
[io-page.2.3.0] downloaded from https://github.com/mirage/io-page/releases/download/v2.3.0/io-page-v2.3.0.tbz
[ipaddr.3.1.0] downloaded from https://github.com/mirage/ocaml-ipaddr/releases/download/v3.1.0/ipaddr-v3.1.0.tbz
[irmin.1.4.0] downloaded from https://github.com/mirage/irmin/releases/download/1.4.0/irmin-1.4.0.tbz
[irmin-git.1.3.0] downloaded from https://github.com/mirage/irmin/releases/download/1.3.0/irmin-1.3.0.tbz
[irmin-mem.1.3.0] downloaded from https://github.com/mirage/irmin/releases/download/1.3.0/irmin-1.3.0.tbz
[jsonm.1.0.1] downloaded from http://erratique.ch/software/jsonm/releases/jsonm-1.0.1.tbz
[logs.0.6.3] downloaded from https://erratique.ch/software/logs/releases/logs-0.6.3.tbz
[macaddr.3.1.0] found in cache
[irmin-watcher.0.4.1] downloaded from https://github.com/mirage/irmin-watcher/releases/download/0.4.1/irmin-watcher-0.4.1.tbz
[mirage-channel.3.2.0] downloaded from https://github.com/mirage/mirage-channel/releases/download/v3.2.0/mirage-channel-v3.2.0.tbz
[magic-mime.1.1.1] downloaded from https://github.com/mirage/ocaml-magic-mime/releases/download/v1.1.1/magic-mime-v1.1.1.tbz
[mirage-channel-lwt.3.2.0] downloaded from https://github.com/mirage/mirage-channel/releases/download/v3.2.0/mirage-channel-v3.2.0.tbz
[mirage-clock.2.0.0] downloaded from https://github.com/mirage/mirage-clock/releases/download/v2.0.0/mirage-clock-v2.0.0.tbz
[mirage-device.1.2.0] downloaded from https://github.com/mirage/mirage-device/releases/download/v1.2.0/mirage-device-v1.2.0.tbz
[mirage-flow.1.6.0] downloaded from https://github.com/mirage/mirage-flow/releases/download/v1.6.0/mirage-flow-v1.6.0.tbz
[mirage-flow-lwt.1.6.0] downloaded from https://github.com/mirage/mirage-flow/releases/download/v1.6.0/mirage-flow-v1.6.0.tbz
[mirage-time.1.3.0] downloaded from https://github.com/mirage/mirage-time/releases/download/v1.3.0/mirage-time-v1.3.0.tbz
[mirage-time-lwt.1.3.0] downloaded from https://github.com/mirage/mirage-time/releases/download/v1.3.0/mirage-time-v1.3.0.tbz
[mstruct.1.4.0] downloaded from https://github.com/mirage/ocaml-mstruct/releases/download/v1.4.0/mstruct-1.4.0.tbz
[mtime.1.1.0] downloaded from http://erratique.ch/software/mtime/releases/mtime-1.1.0.tbz
[named-pipe.0.4.0] downloaded from https://github.com/mirage/ocaml-named-pipe/releases/download/0.4.0/named-pipe-0.4.0.tbz
[ocaml-compiler-libs.v0.12.0] downloaded from https://github.com/janestreet/ocaml-compiler-libs/archive/v0.12.0.tar.gz
[ocamlgraph.1.8.8] downloaded from http://ocamlgraph.lri.fr/download/ocamlgraph-1.8.8.tar.gz
[num.1.2] downloaded from https://github.com/ocaml/num/archive/v1.2.tar.gz
[ocaml-migrate-parsetree.1.4.0] downloaded from https://github.com/ocaml-ppx/ocaml-migrate-parsetree/releases/download/v1.4.0/ocaml-migrate-parsetree-v1.4.0.tbz
[ocb-stubblr.0.1.1-1] downloaded from https://github.com/pqwy/ocb-stubblr/releases/download/v0.1.1/ocb-stubblr-0.1.1.tbz
[ocplib-endian.1.0] downloaded from https://github.com/OCamlPro/ocplib-endian/archive/1.0.tar.gz
[ppx_fields_conv.v0.12.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.12/files/ppx_fields_conv-v0.12.0.tar.gz
[parsexp.v0.12.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.12/files/parsexp-v0.12.0.tar.gz
[ppx_derivers.1.2.1] downloaded from https://github.com/ocaml-ppx/ppx_derivers/archive/1.2.1.tar.gz
[ppx_sexp_conv.v0.12.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.12/files/ppx_sexp_conv-v0.12.0.tar.gz
[prometheus.0.5] downloaded from https://github.com/mirage/prometheus/releases/download/v0.5/prometheus-0.5.tbz
[ppxlib.0.8.0] downloaded from https://github.com/ocaml-ppx/ppxlib/archive/0.8.0.tar.gz
[prometheus-app.0.5] downloaded from https://github.com/mirage/prometheus/releases/download/v0.5/prometheus-0.5.tbz
[protocol-9p.2.0.1] downloaded from https://github.com/mirage/ocaml-9p/releases/download/v2.0.1/protocol-9p-v2.0.1.tbz
[protocol-9p-unix.2.0.1] downloaded from https://github.com/mirage/ocaml-9p/releases/download/v2.0.1/protocol-9p-v2.0.1.tbz
[rresult.0.6.0] downloaded from http://erratique.ch/software/rresult/releases/rresult-0.6.0.tbz
[re.1.9.0] downloaded from https://github.com/ocaml/ocaml-re/releases/download/1.9.0/re-1.9.0.tbz
[sexplib0.v0.12.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.12/files/sexplib0-v0.12.0.tar.gz
[stdio.v0.12.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.12/files/stdio-v0.12.0.tar.gz
[sexplib.v0.12.0] downloaded from https://ocaml.janestreet.com/ocaml-core/v0.12/files/sexplib-v0.12.0.tar.gz
[stringext.1.6.0] downloaded from https://github.com/rgrinberg/stringext/releases/download/1.6.0/stringext-1.6.0.tbz
[uchar.0.0.2] downloaded from https://github.com/ocaml/uchar/releases/download/v0.0.2/uchar-0.0.2.tbz
[uutf.1.0.2] downloaded from http://erratique.ch/software/uutf/releases/uutf-1.0.2.tbz
[uri.3.0.0] downloaded from https://github.com/mirage/ocaml-uri/releases/download/v3.0.0/uri-v3.0.0.tbz
[uri-sexp.3.0.0] downloaded from https://github.com/mirage/ocaml-uri/releases/download/v3.0.0/uri-v3.0.0.tbz
[win-error.1.0] downloaded from https://github.com/mirage/ocaml-win-error/releases/download/1.0/win-error-1.0.tbz
[win-eventlog.0.2] downloaded from https://github.com/djs55/ocaml-win-eventlog/archive/v0.2.tar.gz

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> installed jbuilder.transition
-> installed asetmap.0.8.1
-> installed bigarray-compat.1.0.0
-> installed duration.0.1.2
-> installed logs.0.6.3
-> installed decompress.0.7
-> installed magic-mime.1.1.1
-> installed mirage-device.1.2.0
-> installed mirage-flow.1.6.0
-> installed mtime.1.1.0
-> installed ocaml-compiler-libs.v0.12.0
-> installed ppx_derivers.1.2.1
-> installed re.1.9.0
-> installed rresult.0.6.0
-> installed sexplib0.v0.12.0
-> installed stringext.1.6.0
-> installed win-error.1.0
-> installed base64.3.2.0
-> installed cstruct.5.0.0
-> installed asl.0.11
-> installed irmin-watcher.0.4.1
-> installed win-eventlog.0.2
-> installed mirage-clock.2.0.0
-> installed mirage-time.1.3.0
-> installed mirage-channel.3.2.0
-> installed num.1.2
-> installed base.v0.12.2
-> installed cstruct-lwt.5.0.0
-> installed datakit-client.0.12.3
-> installed datakit-server.0.12.3
-> installed hex.1.4.0
-> installed io-page.2.3.0
-> installed macaddr.3.1.0
-> installed mirage-flow-lwt.1.6.0
-> installed mstruct.1.4.0
-> installed ocaml-migrate-parsetree.1.4.0
-> installed ocplib-endian.1.0
-> installed fieldslib.v0.12.0
-> installed io-page-unix.2.3.0
-> installed ipaddr.3.1.0
-> installed mirage-channel-lwt.3.2.0
-> installed mirage-time-lwt.1.3.0
-> installed ocamlgraph.1.8.8
-> installed ocb-stubblr.0.1.1-1
-> installed parsexp.v0.12.0
-> installed prometheus.0.5
-> installed stdio.v0.12.0
-> installed uchar.0.0.2
-> installed uri.3.0.0
-> installed hvsock.1.0.2
-> installed named-pipe.0.4.0
-> installed sexplib.v0.12.0
-> installed uutf.1.0.2
-> installed git.1.11.5
-> installed cstruct-sexp.5.0.0
-> installed jsonm.1.0.1
-> installed ppxlib.0.8.0
-> installed irmin.1.4.0
-> installed ppx_fields_conv.v0.12.0
-> installed ppx_sexp_conv.v0.12.0
-> installed irmin-mem.1.3.0
-> installed irmin-git.1.3.0
-> installed uri-sexp.3.0.0
-> installed conduit.1.4.0
-> installed protocol-9p.2.0.1
-> installed conduit-lwt.1.4.0
-> installed cohttp.2.1.3
-> installed datakit-server-9p.0.12.3
-> installed protocol-9p-unix.2.0.1
-> installed conduit-lwt-unix.1.4.0
-> installed datakit-client-9p.0.12.3
-> installed cohttp-lwt.2.1.3
-> installed cohttp-lwt-unix.2.1.3
-> installed prometheus-app.0.5
Done.

<><> jbuilder.transition installed successfully <><><><><><><><><><><><><><><><>
=> Jbuilder has been renamed and the jbuilder package is now a transition package. Use the dune package instead.
# Run eval $(opam env) to update the current shell environment
 ---> 6602b1439a99
Removing intermediate container 4d6c9b6009d9
Step 12/23 : COPY . /home/opam/src/datakit
 ---> d397a4ea7e2f
Removing intermediate container 9361651d4b88
Step 13/23 : RUN sudo chown opam.nogroup -R /home/opam/src/datakit
 ---> Running in 98feb12723ad
 ---> 4dccda03df28
Removing intermediate container 98feb12723ad
Step 14/23 : RUN opam update --dev && opam upgrade
 ---> Running in 085914a349d4

<><> Synchronising development packages <><><><><><><><><><><><><><><><><><><><>
[datakit.0.12.3] synchronised from file:///home/opam/src/datakit
[datakit-bridge-github.0.12.3] synchronised from file:///home/opam/src/datakit
[datakit-bridge-local-git.0.12.3] synchronised from file:///home/opam/src/datakit
[datakit-ci.0.12.4] synchronised from file:///home/opam/src/datakit
[datakit-client.0.12.3] synchronised from file:///home/opam/src/datakit
[datakit-client-9p.0.12.3] synchronised from file:///home/opam/src/datakit
[datakit-client-git.0.12.3] synchronised from file:///home/opam/src/datakit
[datakit-github.0.12.3] synchronised from file:///home/opam/src/datakit
[datakit-server-9p.0.12.3] synchronised from file:///home/opam/src/datakit
[datakit-server.0.12.3] synchronised from file:///home/opam/src/datakit
Now run 'opam upgrade' to apply any package updates.
The following actions will be performed:
  - recompile datakit-client    0.12.3* [upstream changes]
  - recompile datakit-server    0.12.3* [upstream changes]
  - recompile datakit-client-9p 0.12.3* [upstream changes]
  - recompile datakit-server-9p 0.12.3* [upstream changes]
===== 4 to recompile =====
[datakit-client.0.12.3] no changes from file:///home/opam/src/datakit
[datakit-client-9p.0.12.3] no changes from file:///home/opam/src/datakit
[datakit-server.0.12.3] no changes from file:///home/opam/src/datakit
[datakit-server-9p.0.12.3] no changes from file:///home/opam/src/datakit

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
-> removed   datakit-client-9p.0.12.3
-> removed   datakit-client.0.12.3
-> installed datakit-client.0.12.3
-> removed   datakit-server-9p.0.12.3
-> removed   datakit-server.0.12.3
-> installed datakit-server.0.12.3
-> installed datakit-client-9p.0.12.3
-> installed datakit-server-9p.0.12.3
Done.
# Run eval $(opam env) to update the current shell environment
 ---> 75b73cff9194
Removing intermediate container 085914a349d4
Step 15/23 : RUN opam install datakit -ytv
 ---> Running in 3a56603b89ce

<><> Synchronising pinned packages ><><><><><><><><><><><><><><><><><><><><><><>
Processing  1/1: [datakit.0.12.3: rsync]
[datakit.0.12.3] no changes from file:///home/opam/src/datakit

The following actions will be performed:
  - install datakit 0.12.3*
[datakit.0.12.3] synchronised from file:///home/opam/src/datakit

<><> Processing actions <><><><><><><><><><><><><><><><><><><><><><><><><><><><>
Processing  1/2: [datakit: dune build]
+ /home/opam/.opam/4.07/bin/dune "build" "-p" "datakit" "-j" "71" (CWD=/home/opam/.opam/4.07/.opam-switch/build/datakit.0.12.3)
Processing  1/2: [datakit: dune runtest]
+ /home/opam/.opam/4.07/bin/dune "runtest" "tests/datakit" (CWD=/home/opam/.opam/4.07/.opam-switch/build/datakit.0.12.3)
-         test alias tests/datakit/runtest
- /bin/sh: tput: not found
- stty: 'standard input': Not a tty
- Testing datakit.
- This run has ID `4DB94AC0-1ACD-4FD3-853D-1683980D8D34`.
- [33m ...[m                [36mserver[m           0   Writes.[32m[OK][m                [36mserver[m           0   Writes.
- [33m ...[m                [36mserver[m           1   RW.[32m[OK][m                [36mserver[m           1   RW.
- [33m ...[m                [36mserver[m           2   Blobs fast.[32m[OK][m                [36mserver[m           2   Blobs fast.
- [33m ...[m                [36mserver[m           3   Blobs random.[32m[OK][m                [36mserver[m           3   Blobs random.
- [33m ...[m                [36mserver[m           4   Streams.[32m[OK][m                [36mserver[m           4   Streams.
- [33m ...[m                [36mconduit[m          0   basic.[32m[OK][m                [36mconduit[m          0   basic.
- The full test results are available in `/home/opam/.opam/4.07/.opam-switch/build/datakit.0.12.3/_build/default/tests/datakit/_build/_tests/4DB94AC0-1ACD-4FD3-853D-1683980D8D34`.
- [32mTest Successful[m in 0.004s. 6 tests run.
+ /home/opam/.opam/4.07/bin/dune "runtest" "tests/datakit-9p" (CWD=/home/opam/.opam/4.07/.opam-switch/build/datakit.0.12.3)
-         test alias tests/datakit-9p/runtest
- /bin/sh: tput: not found
- stty: 'standard input': Not a tty
- Testing datakit-9p.
- This run has ID `09DF42C2-6BCD-4F82-AAF5-1AC2F59E14DF`.
- [33m ...[m                [36mserver[m          0   Transaction.[32m[OK][m                [36mserver[m          0   Transaction.
- [33m ...[m                [36mserver[m          1   Qids.[32m[OK][m                [36mserver[m          1   Qids.
- [33m ...[m                [36mserver[m          2   Watch.[32m[OK][m                [36mserver[m          2   Watch.
- [33m ...[m                [36mserver[m          3   Range.[32m[OK][m                [36mserver[m          3   Range.
- [33m ...[m                [36mserver[m          4   Rename branch.[32m[OK][m                [36mserver[m          4   Rename branch.
- [33m ...[m                [36mserver[m          5   Rename file.[32m[OK][m                [36mserver[m          5   Rename file.
- [33m ...[m                [36mserver[m          6   Truncate.[32m[OK][m                [36mserver[m          6   Truncate.
- [33m ...[m                [36mserver[m          7   Parents.[32m[OK][m                [36mserver[m          7   Parents.
- [33m ...[m                [36mserver[m          8   Merge.[32m[OK][m                [36mserver[m          8   Merge.
- [33m ...[m                [36mserver[m          9   Merge_metadata.[32m[OK][m                [36mserver[m          9   Merge_metadata.
- [33m ...[m                [36mserver[m         10   Merge empty.[32m[OK][m                [36mserver[m         10   Merge empty.
- [33m ...[m                [36mserver[m         11   Conflicts.[32m[OK][m                [36mserver[m         11   Conflicts.
- [33m ...[m                [36mserver[m         12   Stable inodes.[32m[OK][m                [36mserver[m         12   Stable inodes.
- [33m ...[m                [36mserver[m         13   Remotes.[33m[SKIP][m              [36mserver[m         13   Remotes.
- [33m ...[m                [36mserver[m         14   Debug.[32m[OK][m                [36mserver[m         14   Debug.
- [33m ...[m                [36mclient[m          0   Transaction.[32m[OK][m                [36mclient[m          0   Transaction.
- [33m ...[m                [36mclient[m          1   Watch.[32m[OK][m                [36mclient[m          1   Watch.
- [33m ...[m                [36mclient[m          2   Make dirs.[32m[OK][m                [36mclient[m          2   Make dirs.
- [33m ...[m                [36mclient[m          3   Truncate.[32m[OK][m                [36mclient[m          3   Truncate.
- [33m ...[m                [36mclient[m          4   Parents.[32m[OK][m                [36mclient[m          4   Parents.
- [33m ...[m                [36mclient[m          5   Merge.[32m[OK][m                [36mclient[m          5   Merge.
- [33m ...[m                [36mclient[m          6   Diff.[32m[OK][m                [36mclient[m          6   Diff.
- [33m ...[m                [36mclient[m          7   Merge_metadata.[32m[OK][m                [36mclient[m          7   Merge_metadata.
- [33m ...[m                [36mclient[m          8   Merge empty.[32m[OK][m                [36mclient[m          8   Merge empty.
- [33m ...[m                [36mclient[m          9   Conflicts.[32m[OK][m                [36mclient[m          9   Conflicts.
- [33m ...[m                [36mclient[m         10   Large write.[32m[OK][m                [36mclient[m         10   Large write.
- [33m ...[m                [36mclient[m         11   Remove.[32m[OK][m                [36mclient[m         11   Remove.
- [33m ...[m                [36mclient[m         12   Remotes.[33m[SKIP][m              [36mclient[m         12   Remotes.
- [33m ...[m                [36mclient[m         13   Create_or_replace.[33m[SKIP][m              [36mclient[m         13   Create_or_replace.
- The full test results are available in `/home/opam/.opam/4.07/.opam-switch/build/datakit.0.12.3/_build/default/tests/datakit-9p/_build/_tests/09DF42C2-6BCD-4F82-AAF5-1AC2F59E14DF`.
- [32mTest Successful[m in 0.276s. 26 tests run.
-> compiled  datakit.0.12.3
-> installed datakit.0.12.3
Done.
# Run eval $(opam env) to update the current shell environment
 ---> d06e886d4038
Removing intermediate container 3a56603b89ce
Step 16/23 : RUN sudo cp $(opam config exec -- which datakit) /usr/bin/datakit &&     sudo cp $(opam config exec -- which datakit-mount) /usr/bin/datakit-mount
 ---> Running in 866125fadd92
 ---> 2953b34efabf
Removing intermediate container 866125fadd92
Step 17/23 : FROM alpine:3.9
3.9: Pulling from library/alpine
Digest: sha256:7746df395af22f04212cd25a92c1d6dbc5a06a0ca9579a229ef43008d4d1302a
Status: Image is up to date for alpine:3.9
 ---> 055936d39205
Step 18/23 : RUN apk add --no-cache libev gmp tzdata ca-certificates git openssh-client bash
 ---> Using cache
 ---> f0347bab59d3
Step 19/23 : EXPOSE 5640
 ---> Using cache
 ---> 95748f9f313d
Step 20/23 : ENTRYPOINT /usr/bin/datakit
 ---> Using cache
 ---> f6a8bd77edb2
Step 21/23 : CMD --url=tcp://0.0.0.0:5640 --git=/data -v
 ---> Using cache
 ---> 95e45f4f441e
Step 22/23 : COPY --from=0 /usr/bin/datakit /usr/bin/datakit
 ---> ed809acba65f
Removing intermediate container 6779883daeb5
Step 23/23 : COPY --from=0 /usr/bin/datakit-mount /usr/bin/datakit-mount
 ---> 3c8d1824ea5c
Removing intermediate container 5c872b71dfd5
Successfully built 3c8d1824ea5c
[2019-07-12 14:29.18] Success
